<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Honey Adventure - Mobile Touch</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; padding:0; font-family:Arial,sans-serif; text-align:center; background:#c8e6c9; }
h1 { color:#ff9800; font-size:5vw; margin:10px 0; }
#levelIndicator { font-size:4vw; margin-bottom:5px; font-weight:bold; }
#gameArea { width:90vw; height:60vw; max-width:600px; max-height:400px; margin:10px auto; position:relative; background:#81d4fa; border:3px solid #4caf50; border-radius:10px; overflow:hidden; }
.bee { width:12%; aspect-ratio:1/1; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:url('https://i.postimg.cc/W3gspNsm/pcela.png') no-repeat center/contain; }
.flower { width:12%; aspect-ratio:1/1; position:absolute; background-size:contain; background-repeat:no-repeat; }
#reward { width:20%; aspect-ratio:1/1; position:absolute; bottom:5%; left:50%; transform:translateX(-50%); display:none; background:url('https://i.postimg.cc/2SSjdNxm/med.png') no-repeat center/contain; }
#message { font-size:5vw; font-weight:bold; color:#2e7d32; margin-top:10px; display:none; }
</style>
</head>
<body>

<h1>Honey Adventure üå∏</h1>
<div id="levelIndicator"></div>
<div id="gameArea">
  <div class="bee" id="bee"></div>
  <div id="reward"></div>
</div>
<div id="message"></div>

<script>
const bee = document.getElementById('bee');
const gameArea = document.getElementById('gameArea');
const reward = document.getElementById('reward');
const message = document.getElementById('message');
const levelIndicator = document.getElementById('levelIndicator');

let flowerImages = [
  'https://i.postimg.cc/YqkC9WGv/ljubic-ruza.png',
  'https://i.postimg.cc/Hn1sbJ6P/cvet-rozi.png',
  'https://i.postimg.cc/k4ftcvth/crvena-ruza.png'
];

let flowers = [];
let beeX = gameArea.clientWidth / 2;
let beeY = gameArea.clientHeight / 2;
let targetX = beeX;
let targetY = beeY;

let today = new Date().toDateString();
let savedDate = localStorage.getItem('lastPlayDate');
let savedLevel = parseInt(localStorage.getItem('lastLevel')) || 1;

if(savedDate !== today && savedLevel < 7){
  savedLevel += 1;
  localStorage.setItem('lastLevel', savedLevel);
  localStorage.setItem('lastPlayDate', today);
}

let currentLevel = savedLevel;
levelIndicator.innerText = "Level " + currentLevel + " / 7";

// Ako je vec odigrano danas
if(savedDate === today){
  message.innerText = "Congratulations! Take your honey spoon and come back tomorrow!";
  message.style.display = 'block';
  speakMessage(message.innerText);
} else {
  startLevel();
}

// Dodavanje cveƒáa
function startLevel(){
  flowers.forEach(f=>f.remove());
  flowers = [];
  
  flowerImages.forEach(img=>{
    const flower = document.createElement('div');
    flower.classList.add('flower');
    flower.style.backgroundImage = `url(${img})`;
    flower.style.top = Math.random()*80+"%";
    flower.style.left = Math.random()*80+"%";
    gameArea.appendChild(flower);
    flowers.push(flower);
  });
}

// Provera da li pƒçela dodiruje cvet
function checkCollision(){
  const beeRect = bee.getBoundingClientRect();
  flowers = flowers.filter(flower => {
    const fRect = flower.getBoundingClientRect();
    if(!(beeRect.right < fRect.left || beeRect.left > fRect.right || beeRect.bottom < fRect.top || beeRect.top > fRect.bottom)){
      flower.remove();
      return false;
    }
    return true;
  });
  if(flowers.length === 0){
    reward.style.display = 'block';
    message.innerText = "Congratulations! Take your honey spoon and come back tomorrow!";
    message.style.display = 'block';
    localStorage.setItem('lastPlayDate', today);
    speakMessage(message.innerText);
  }
}

// Kretanje pƒçele
function moveBee(){
  let dx = targetX - beeX;
  let dy = targetY - beeY;
  beeX += dx * 0.05;
  beeY += dy



